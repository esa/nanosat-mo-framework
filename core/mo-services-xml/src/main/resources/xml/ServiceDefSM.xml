<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<mal:specification xmlns:mal="http://www.ccsds.org/schema/ServiceSchema" xmlns:com="http://www.ccsds.org/schema/COMSchema" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <mal:area comment="The Software Management set of services contains services for on-board software management of a spacecraft. The following services are contained in the Software Management set:&#10;The Memory Management service is a low-level service intended to be used to load, dump and check memory addresses.&#10;The Software Image service is intended to manage Software Images and Software Patches by allowing the generation of new Software Images from a patch.&#10;The Package Management service allows the management of software packages on modern operating systems using the concept of packages.&#10;The Apps Launcher service allows the management of runnable applications in a system.&#10;The Heartbeat service publishes a periodic beat to the consumers that are listening.&#10;&#10;This section details the Software Management services. The area and structures are defined in terms of the MO Message Abstraction Layer (MAL), so it is possible to deploy them over any supported protocol and message transport." name="SoftwareManagement" number="7" version="1">
    <mal:service comment="The Package Management service provides the ability to install, uninstall, upgrade, list, check packages. The service shall optionally support verification of packages, verification of digital signatures, upgrade software, manage dependencies.&#10;Packages can be organized in different categories in order to facilitate the management of software." name="PackageManagement" number="1" xsi:type="com:ExtendedServiceType">
      <mal:documentation name="High Level Requirements" order="1">The Package Management service shall provide:
&lt;ol&gt;
&lt;li&gt;the capability for listing, installing and uninstalling packages;&lt;/li&gt;
&lt;li&gt;the capability for upgrading packages;&lt;/li&gt;
&lt;li&gt;the capability for checking the integrity of a package;&lt;/li&gt;
&lt;li&gt;the capability for listing the package categories available on the provider.&lt;/li&gt;
&lt;/ol&gt;
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2"/>
      <mal:capabilitySet comment="" number="1">
        <mal:requestIP comment="The findPackage operation allows a consumer to find the available packages on the provider." name="findPackage" number="1" supportInReplay="true">
          <mal:messages>
            <mal:request comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:request>
            <mal:response comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field canBeNull="true" comment="The installed field shall hold the status of the package." name="installed">
                <mal:type area="MAL" list="true" name="Boolean"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested packages is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
        <mal:invokeIP comment="The install operation allows a consumer to install the content of a package on the provider. The selected packages will be installed sequencially." name="install" number="2" supportInReplay="false">
          <mal:messages>
            <mal:invoke comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:invoke>
            <mal:acknowledgement comment="">
              <mal:field canBeNull="true" comment="The integrity field contains the status of the package integrity." name="integrity">
                <mal:type area="MAL" list="true" name="Boolean"/>
              </mal:field>
            </mal:acknowledgement>
            <mal:response comment=""/>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested packages is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="One or more of the requested packages is already installed.">
              <mal:type area="COM" list="false" name="INVALID"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:invokeIP>
        <mal:invokeIP comment="The uninstall operation allows a consumer to uninstall the content of a package on the provider. The selected packages will be uninstalled sequencially." name="uninstall" number="3" supportInReplay="false">
          <mal:messages>
            <mal:invoke comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field canBeNull="true" comment="The keepConfigurations field selects if the configuration of the executable files shall be kept." name="keepConfigurations">
                <mal:type area="MAL" list="true" name="Boolean"/>
              </mal:field>
            </mal:invoke>
            <mal:acknowledgement comment=""/>
            <mal:response comment=""/>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested packages is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="One or more of the requested packages is not installed.">
              <mal:type area="COM" list="false" name="INVALID"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:invokeIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="2">
        <mal:invokeIP comment="The upgrade operation allows a consumer to upgrade the content of a package on the provider. The selected packages will be upgraded sequencially." name="upgrade" number="4" supportInReplay="false">
          <mal:messages>
            <mal:invoke comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:invoke>
            <mal:acknowledgement comment=""/>
            <mal:response comment=""/>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested packages is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="One or more of the requested packages is not installed.">
              <mal:type area="COM" list="false" name="INVALID"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:invokeIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="3">
        <mal:requestIP comment="The checkPackageIntegrity operation allows a consumer to check the integrity of a certain package on the provider." name="checkPackageIntegrity" number="5" supportInReplay="false">
          <mal:messages>
            <mal:request comment="">
              <mal:field canBeNull="true" comment="The names field contains the names of the packages." name="names">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
            </mal:request>
            <mal:response comment="">
              <mal:field canBeNull="true" comment="" name="validCRCs">
                <mal:type area="MAL" list="true" name="Boolean"/>
              </mal:field>
              <mal:field canBeNull="true" comment="" name="publicKeys">
                <mal:type area="MAL" list="true" name="String"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested packages is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="Integer"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:dataTypes>
        <mal:composite comment="The PackageDefinition structure holds the definition information of a package." name="PackageDefinition" shortFormPart="7">
          <mal:extends>
            <mal:type area="MAL" list="false" name="Composite"/>
          </mal:extends>
          <mal:field canBeNull="false" comment="The name of the package." name="name">
            <mal:type area="MAL" list="false" name="Identifier"/>
          </mal:field>
          <mal:field canBeNull="true" comment="The description of the package." name="description">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The category of the package." name="category">
            <mal:type area="MAL" list="false" name="Identifier"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The path of the file where the package is located." name="path">
            <mal:type area="MAL" list="false" name="File"/>
          </mal:field>
          <mal:field canBeNull="true" comment="The publisher of the package. It can be, for example, a company or group of people." name="publisher">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
        </mal:composite>
        <mal:composite comment="The InstallationDetails structure holds the installation details of a certain package." name="InstallationDetails" shortFormPart="8">
          <mal:extends>
            <mal:type area="MAL" list="false" name="Composite"/>
          </mal:extends>
          <mal:field canBeNull="true" comment="The status information about whether a package is/was installed or not." name="installed">
            <mal:type area="MAL" list="false" name="Boolean"/>
          </mal:field>
          <mal:field canBeNull="true" comment="To be done..." name="folderLocation">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
        </mal:composite>
      </mal:dataTypes>
      <com:features>
        <mal:diagram name="PackageManagementObjects">
          <svg:svg height="200" version="1.1" width="500">
            <svg:defs>
              <svg:linearGradient id="box_gradient" x1="0%" x2="100%" y1="0%" y2="0%">
                <svg:stop offset="0%" style="stop-color:rgb(237,227,212);stop-opacity:1"/>
                <svg:stop offset="100%" style="stop-color:rgb(249,239,224);stop-opacity:1"/>
              </svg:linearGradient>
              <svg:marker id="sourceArrow" markerHeight="10" markerWidth="15" orient="auto" refX="0" refY="5">
                <svg:path d="M0,0 V10 L15,5 Z" fill="rgb(255,0,0)"/>
              </svg:marker>
              <svg:marker id="relatedArrow" markerHeight="10" markerWidth="15" orient="auto" refX="0" refY="5">
                <svg:path d="M0,0 V10 L15,5 Z" fill="rgb(0,0,0)"/>
              </svg:marker>
            </svg:defs>
            <svg:path d="M135,90 L240,90 L345,90" end="Package" fill="none" marker-mid="url(#relatedArrow)" start="Installation" stroke="rgb(0,0,0)" stroke-width="1"/>
            <svg:g id="Package" transform="translate(280,50)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="0" width="130" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="0" stroke="black" stroke-width="2" width="130"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="65" y="25">Package</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="65" y="45">1</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="65" y="65">PackageDefinition</svg:text>
            </svg:g>
            <svg:g id="Installation" transform="translate(70,50)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="0" width="130" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="0" stroke="black" stroke-width="2" width="130"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="65" y="25">Installation</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="65" y="45">2</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="65" y="65">MAL::Identifier</svg:text>
            </svg:g>
          </svg:svg>
        </mal:diagram>
        <com:objects comment="">
          <com:object comment="" name="Package" number="1">
            <com:objectType>
              <mal:type area="SoftwareManagement" list="false" name="PackageDefinition" service="PackageManagement"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment=""/>
          </com:object>
          <com:object comment="" name="Installation" number="2">
            <com:objectType>
              <mal:type area="MAL" list="false" name="Identifier"/>
            </com:objectType>
            <com:relatedObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="PackageManagement"/>
            </com:relatedObject>
            <com:sourceObject comment=""/>
          </com:object>
        </com:objects>
        <com:events comment=""/>
        <com:activityUsage comment="Add the activity tracking for the progress of installation. Also for the Software Image service"/>
      </com:features>
    </mal:service>
    <mal:service comment="The Heartbeat service provides the ability to periodically publish a heartbeat message. Additionally it is possible to get the period of the beat." name="Heartbeat" number="2" xsi:type="com:ExtendedServiceType">
      <mal:documentation name="High Level Requirements" order="1">The Heartbeat service shall provide:
&lt;ol&gt;
&lt;li&gt;the capability for periodic monitoring of the beat;&lt;/li&gt;
&lt;li&gt;the capability for retrieving the period of the beat.&lt;/li&gt;
&lt;/ol&gt;
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2"/>
      <mal:capabilitySet comment="" number="1">
        <mal:pubsubIP comment="The beat operation allows a provider to periodically send a heartbeat to the consumers." name="beat" number="1" supportInReplay="false">
          <mal:messages>
            <mal:publishNotify comment="">
            </mal:publishNotify>
          </mal:messages>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="2">
        <mal:requestIP comment="The getPeriod operation allows a consumer to get the period of the provider's heartbeat." name="getPeriod" number="2" supportInReplay="true">
          <mal:messages>
            <mal:request comment=""/>
            <mal:response comment="">
              <mal:field canBeNull="true" comment="The period field shall hold period of the heartbeat message." name="period">
                <mal:type area="MAL" list="false" name="Duration"/>
              </mal:field>
            </mal:response>
          </mal:messages>
        </mal:requestIP>
      </mal:capabilitySet>
      <com:features/>
    </mal:service>
    <mal:service comment="The Command Executor service allows executing arbitrary system commands and monitoring their status." name="CommandExecutor" number="3" xsi:type="com:ExtendedServiceType">
      <mal:capabilitySet comment="" number="1">
        <mal:requestIP comment="This operation allows a consumer to spawn a new shell instance and execute an arbitrary command on the provider host." name="runCommand" number="1" supportInReplay="false">
          <mal:messages>
            <mal:request comment="">
              <mal:field canBeNull="true" comment="Details of the command to be run." name="command">
                <mal:type area="SoftwareManagement" list="false" name="CommandDetails" service="CommandExecutor"/>
              </mal:field>
            </mal:request>
            <mal:response comment="">
              <mal:field canBeNull="true" comment="Contains a corresponding COM object instance identifier created in the Archive." name="commandInstId">
                <mal:type area="MAL" list="false" name="Long"/>
              </mal:field>
            </mal:response>
          </mal:messages>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:dataTypes>
        <mal:composite comment="This structure holds the execution details of a command, including its status." name="CommandDetails" shortFormPart="1">
          <mal:extends>
            <mal:type area="MAL" list="false" name="Composite"/>
          </mal:extends>
          <mal:field canBeNull="false" comment="The command line passed to the executing shell instance." name="command">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="true" comment="Assigned Process ID of the spawned shell instance. Shall be NULL if the execution has not started yet. -1 if the PID cannot be determined." name="pid">
            <mal:type area="MAL" list="false" name="Long"/>
          </mal:field>
          <mal:field canBeNull="true" comment="Exit code of the command. Shall be NULL if the execution has not completed yet." name="exitCode">
            <mal:type area="MAL" list="false" name="Integer"/>
          </mal:field>
        </mal:composite>
      </mal:dataTypes>
      <com:features>
        <com:objects comment="A Command COM object represents an instance of direct command execution requested from the provider. The COM object body shall hold the details of the command.&#10;&lt;ol&gt;&#10;&lt;/ol&gt;">
          <com:object comment="" name="Command" number="1">
            <com:objectType>
              <mal:type area="SoftwareManagement" list="false" name="CommandDetails" service="CommandExecutor"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment=""/>
          </com:object>
        </com:objects>
        <com:events comment="">
          <com:event comment="This event is produced to allow monitoring of the command stdout output. It contains a buffer of an arbitrary size with a chunk of stdout output." name="StandardOutput" number="2">
            <com:objectType>
              <mal:type area="MAL" list="false" name="String"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="CommandExecutor"/>
            </com:sourceObject>
          </com:event>
          <com:event comment="This event is produced to allow monitoring of the command stderr output. It contains a buffer of an arbitrary size with a chunk of stderr output." name="StandardError" number="3">
            <com:objectType>
              <mal:type area="MAL" list="false" name="String"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="CommandExecutor"/>
            </com:sourceObject>
          </com:event>
          <com:event comment="This event is produced to indicate that the command has finished its execution. Contains an exit code." name="ExecutionFinished" number="4">
            <com:objectType>
              <mal:type area="MAL" list="false" name="Integer"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="CommandExecutor"/>
            </com:sourceObject>
          </com:event>
        </com:events>
      </com:features>
    </mal:service>
    <mal:service comment="The Apps Launcher service provides the ability to monitor the execution, run, stop, kill and list applications software on-board of a spacecraft. The apps can be organized in categories.&#10;The service is independent from any particular Operating System or platform. " name="AppsLauncher" number="5" xsi:type="com:ExtendedServiceType">
      <mal:documentation name="High Level Requirements" order="1">The Apps Launcher service shall provide:
&lt;ol&gt;
&lt;li&gt;the capability for periodic monitoring of the applications output;&lt;/li&gt;
&lt;li&gt;the capability for running and killing applications;&lt;/li&gt;
&lt;li&gt;the capability for stopping applications;&lt;/li&gt;
&lt;li&gt;the capability for listing the object instance identifiers for the available apps.&lt;/li&gt;
&lt;/ol&gt;
      </mal:documentation>
      <mal:documentation name="Functional Requirements" order="2"/>
      <mal:capabilitySet comment="" number="1">
        <mal:pubsubIP comment="The monitorExecution operation allows a consumer to subscribe for the application execution output stream." name="monitorExecution" number="1" supportInReplay="false">
          <mal:messages>
            <mal:publishNotify comment="">
              <mal:field canBeNull="true" comment="The outputStream field shall contain a stream of characters corresponding to the output stream of the application.&#10;The MAL EntityKey.firstSubKey shall contain the App name.&#10;The MAL EntityKey.secondSubKey shall contain the AppDetails object instance identifier.&#10;The MAL EntityKey.thirdSubKey shall be NULL.&#10;The MAL EntityKey.fourthSubKey shall be NULL.&#10;The timestamp of the update shall be the on-board time when the update was published.&#10;The publish message shall include the ObjectId of the source link of the update.&#10;If no source link is needed then the ObjectId shall be replaced with a NULL." name="outputStream">
                <mal:type area="MAL" list="false" name="String"/>
              </mal:field>
            </mal:publishNotify>
          </mal:messages>
        </mal:pubsubIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="2">
        <mal:submitIP comment="The runApp operation allows a consumer to run an application on the provider." name="runApp" number="2" supportInReplay="false">
          <mal:messages>
            <mal:submit comment="">
              <mal:field canBeNull="true" comment="The appInstIds field contains the list of apps to run." name="appInstIds">
                <mal:type area="MAL" list="true" name="Long"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested apps to run is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="One or more of the requested apps is already running.">
              <mal:type area="COM" list="false" name="INVALID"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="The process of the app could not be started.">
              <mal:type area="MAL" list="false" name="INTERNAL"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
        <mal:submitIP comment="The killApp operation allows a consumer to kill the execution of an application on the provider in case an application becomes unresponsive." name="killApp" number="3" supportInReplay="false">
          <mal:messages>
            <mal:submit comment="">
              <mal:field canBeNull="true" comment="The appInstIds field contains the list of apps to be killed." name="appInstIds">
                <mal:type area="MAL" list="true" name="Long"/>
              </mal:field>
            </mal:submit>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested apps to be killed is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
            <mal:errorRef comment="One or more of the requested apps is not running.">
              <mal:type area="COM" list="false" name="INVALID"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:submitIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="3">
        <mal:progressIP comment="The stopApp operation allows a consumer to stop the execution of an application on the provider." name="stopApp" number="4" supportInReplay="false">
          <mal:messages>
            <mal:progress comment="">
              <mal:field canBeNull="true" comment="The appInstIds field contains the list of apps to stop." name="appInstIds">
                <mal:type area="MAL" list="true" name="Long"/>
              </mal:field>
            </mal:progress>
            <mal:acknowledgement comment=""/>
            <mal:update comment="">
              <mal:field canBeNull="true" comment="The appClosing field shall contain the object instance identifier of an app. This update shall be sent after the app acknowledges the reception of the command to stop." name="appClosing">
                <mal:type area="MAL" list="false" name="Long"/>
              </mal:field>
            </mal:update>
            <mal:response comment=""/>
          </mal:messages>
        </mal:progressIP>
      </mal:capabilitySet>
      <mal:capabilitySet comment="" number="4">
        <mal:requestIP comment="The listApp operation allows a consumer to request the object instance identifiers of the Apps objects and running status for an app name or for a certain app category." name="listApp" number="5" supportInReplay="true">
          <mal:messages>
            <mal:request comment="">
              <mal:field canBeNull="true" comment="The appNames field contains a list of application names." name="appNames">
                <mal:type area="MAL" list="true" name="Identifier"/>
              </mal:field>
              <mal:field canBeNull="true" comment="The category field contains the category identifier to filter on." name="category">
                <mal:type area="MAL" list="false" name="Identifier"/>
              </mal:field>
            </mal:request>
            <mal:response comment="">
              <mal:field canBeNull="true" comment="The appInstIds field contains a list of apps." name="appInstIds">
                <mal:type area="MAL" list="true" name="Long"/>
              </mal:field>
              <mal:field canBeNull="true" comment="The running field contains a list of boolean values with the information about thte running status of requested apps.&#10;The returned lists shall maintain the same order as the submitted list unless the wildcard value was included in the appNames field request." name="running">
                <mal:type area="MAL" list="true" name="Boolean"/>
              </mal:field>
            </mal:response>
          </mal:messages>
          <mal:errors>
            <mal:errorRef comment="One or more of the requested apps to run is unknown.">
              <mal:type area="MAL" list="false" name="UNKNOWN"/>
              <mal:extraInformation comment="A list of the indexes of the error values shall be contained in the extra information field.">
                <mal:type area="MAL" list="true" name="UInteger"/>
              </mal:extraInformation>
            </mal:errorRef>
          </mal:errors>
        </mal:requestIP>
      </mal:capabilitySet>
      <mal:dataTypes>
        <mal:composite comment="The AppDetails structure holds the details of an instance of an app." name="AppDetails" shortFormPart="1">
          <mal:extends>
            <mal:type area="MAL" list="false" name="Composite"/>
          </mal:extends>
          <mal:field canBeNull="false" comment="The name of the app. Must not be empty or wildcard value." name="name">
            <mal:type area="MAL" list="false" name="Identifier"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The description of the app." name="description">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The version of the app." name="version">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The category of the app." name="category">
            <mal:type area="MAL" list="false" name="Identifier"/>
          </mal:field>
          <mal:field canBeNull="false" comment="Controls whether the app runs at startup of the Supervisor." name="runAtStartup">
            <mal:type area="MAL" list="false" name="Boolean"/>
          </mal:field>
          <mal:field canBeNull="false" comment="The current running state of the app." name="running">
            <mal:type area="MAL" list="false" name="Boolean"/>
          </mal:field>
          <mal:field canBeNull="true" comment="Additional information that might be implementation-specific." name="extraInfo">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="true" comment="The copyright of the app." name="copyright">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
          <mal:field canBeNull="true" comment="The user the app is run as." name="runAs">
            <mal:type area="MAL" list="false" name="String"/>
          </mal:field>
        </mal:composite>
      </mal:dataTypes>
      <com:features>
        <mal:diagram name="AppsLauncherObjects">
          <svg:svg height="300" version="1.1" width="760">
            <svg:defs>
              <svg:linearGradient id="box_gradient" x1="0%" x2="100%" y1="0%" y2="0%">
                <svg:stop offset="0%" style="stop-color:rgb(237,227,212);stop-opacity:1"/>
                <svg:stop offset="100%" style="stop-color:rgb(249,239,224);stop-opacity:1"/>
              </svg:linearGradient>
              <svg:marker id="sourceArrow" markerHeight="10" markerWidth="15" orient="auto" refX="0" refY="5">
                <svg:path d="M0,0 V10 L15,5 Z" fill="rgb(255,0,0)"/>
              </svg:marker>
              <svg:marker id="relatedArrow" markerHeight="10" markerWidth="15" orient="auto" refX="0" refY="5">
                <svg:path d="M0,0 V10 L15,5 Z" fill="rgb(0,0,0)"/>
              </svg:marker>
            </svg:defs>

            <svg:path d="M220,188 L301,188 L383,187" end="App" fill="none" marker-mid="url(#relatedArrow)" start="StopApp" stroke="rgb(0,0,0)" stroke-width="1"/>
            <svg:path d="M220,188 L220,119 L220,50" end="COM::ActivityTracking::OperationActivity" fill="none" marker-mid="url(#sourceArrow)" start="StopApp" stroke="rgb(255,0,0)" stroke-width="1"/>
            <svg:path d="M57,155 L138,171 L220,188" end="StopApp" fill="none" marker-mid="url(#sourceArrow)" start="Stopping" stroke="rgb(255,0,0)" stroke-width="1"/>

            <svg:path d="M383,187 L507,187 L631,188" end="PackageManagement::Installation" fill="none" marker-mid="url(#sourceArrow)" start="App" stroke="rgb(255,0,0)" stroke-width="1"/>
            <svg:path d="M60,245 L140,217 L220,188" end="StopApp" fill="none" marker-mid="url(#sourceArrow)" start="Stopped" stroke="rgb(255,0,0)" stroke-width="1"/>
            <svg:g id="Stopping" transform="translate(7,115)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="15" width="100" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="15" stroke="black" stroke-width="2" width="100"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="50" y="35">Stopping</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="50" y="55">3</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="50" y="75"/>
            </svg:g>
            <svg:g id="Stopped" transform="translate(25,215)">
              <svg:rect fill="rgb(190,190,190)" height="60" id="shadow" opacity="0.5" rx="15" width="70" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="60" id="frame" rx="15" stroke="black" stroke-width="2" width="70"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="35" y="25">Stopped</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="35" y="45">4</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="35" y="65"/>
            </svg:g>
            <svg:g id="StopApp" transform="translate(165,148)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="15" width="110" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="15" stroke="black" stroke-width="2" width="110"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="55" y="25">StopApp</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="55" y="45">2</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="55" y="65">MAL::Identifier</svg:text>
            </svg:g>
            <svg:g id="COM::ActivityTracking::OperationActivity" transform="translate(85,10)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="0" width="270" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="0" stroke="black" stroke-width="2" width="270"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="135" y="25">COM::ActivityTracking::OperationActivity</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="135" y="45">6</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="135" y="65">COM::ActivityTracking::OperationActivity</svg:text>
            </svg:g>
            <svg:g id="App" transform="translate(333,147)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="0" width="100" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="0" stroke="black" stroke-width="2" width="100"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="50" y="25">App</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="50" y="45">1</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="50" y="65">AppDetails</svg:text>
            </svg:g>
            <svg:g id="PackageManagement::Installation" transform="translate(519,148)">
              <svg:rect fill="rgb(190,190,190)" height="80" id="shadow" opacity="0.5" rx="0" width="225" x="4" y="4"/>
              <svg:rect fill="url(#box_gradient)" height="80" id="frame" rx="0" stroke="black" stroke-width="2" width="225"/>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_name" pointer-events="none" text-anchor="middle" x="112" y="25">PackageManagement::Installation</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_number" pointer-events="none" text-anchor="middle" x="112" y="45">2</svg:text>
              <svg:text fill="navy" font-family="Verdana,Arial" font-size="12" id="object_type" pointer-events="none" text-anchor="middle" x="112" y="65">MAL::Identifier</svg:text>
            </svg:g>
          </svg:svg>
        </mal:diagram>
        <com:objects comment="An App COM object represents an on-board application. The COM object body shall hold the details of the application.&#10;&lt;ol&gt;&#10;&lt;li&gt;The App COM object source link should point to the package from where the app was installed.&lt;/li&gt;&#10;&lt;/ol&gt;">
          <com:object comment="" name="App" number="1">
            <com:objectType>
              <mal:type area="SoftwareManagement" list="false" name="AppDetails" service="AppsLauncher"/>
            </com:objectType>
            <com:relatedObject comment=""/>
            <com:sourceObject comment="">
              <com:objectType area="SoftwareManagement" number="2" service="PackageManagement"/>
            </com:sourceObject>
          </com:object>

        </com:objects>
        <com:events comment="A StopApp COM event represents a request to stop a certain application. The COM event object body shall hold the name of the provider to be stopped.&#10;&lt;ol&gt;&#10;&lt;li&gt;The StopApp COM event related link shall point to the App COM object.&lt;/li&gt;&#10;&lt;li&gt;The StopApp COM event source link should point to the object that caused it to be created, most likely a COM OperationActivity object.&lt;/li&gt;&#10;&lt;li&gt;The StopApp COM event shall be generated by the stopApp operation.&lt;/li&gt;&#10;&lt;/ol&gt;&#10;A Stopping COM event represents an acknowledgement that the application is stopping its execution.&#10;&lt;ol&gt;&#10;&lt;li&gt;The Stopping COM event source link shall point to the StopApp COM event that requested the application to stop or to null if there was no request.&lt;/li&gt;&#10;&lt;li&gt;The Stopping COM event shall be generated by the application when it is going to stop its execution.&lt;/li&gt;&#10;&lt;/ol&gt;&#10;A Stopped COM event represents an acknowledgement that the application is going to completely stop its execution.&#10;&lt;ol&gt;&#10;&lt;li&gt;The Stopped COM event source link shall point to the StopApp COM event that requested the application to stop or to null if there was no request.&lt;/li&gt;&#10;&lt;li&gt;The Stopped COM event shall be generated by the application when it is completely stopping its execution.&lt;/li&gt;&#10;&lt;/ol&gt;&#10;A RunApp COM event represents a request to run a certain application. The COM event object body shall hold the name of the provider to be started.&#10;&lt;ol&gt;&#10;&lt;li&gt;The RunApp COM event related link shall point to the App COM object.&lt;/li&gt;&#10;&lt;li&gt;The RunApp COM event source link should point to the object that caused it to be created, most likely a COM OperationActivity object.&lt;/li&gt;&#10;&lt;li&gt;The RunApp COM event shall be generated by the runApp operation.&lt;/li&gt;&#10;&lt;/ol&gt;&#10;">
          <com:event comment="This event is generated upon receiving a request to stop a certain app." name="StopApp" number="2">
            <com:objectType>
              <mal:type area="MAL" list="false" name="Identifier"/>
            </com:objectType>
            <com:relatedObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="AppsLauncher"/>
            </com:relatedObject>
            <com:sourceObject comment="">
              <com:objectType area="COM" number="6" service="ActivityTracking"/>
            </com:sourceObject>
          </com:event>

          <com:event comment="This event is generated by the app is going to be stopped." name="Stopping" number="3">
            <com:relatedObject comment=""/>
            <com:sourceObject comment="The source object shall be the StopApp event.">
              <com:objectType area="SoftwareManagement" number="2" service="AppsLauncher"/>
            </com:sourceObject>
          </com:event>
          <com:event comment="This event is generated by the app right before stopping completely." name="Stopped" number="4">
            <com:relatedObject comment=""/>
            <com:sourceObject comment="The source object shall be the StopApp event.">
              <com:objectType area="SoftwareManagement" number="2" service="AppsLauncher"/>
            </com:sourceObject>
          </com:event>

          <com:event comment="This event is generated upon receiving a request to start a certain app." name="StartApp" number="5">
            <com:objectType>
              <mal:type area="MAL" list="false" name="Identifier"/>
            </com:objectType>
            <com:relatedObject comment="">
              <com:objectType area="SoftwareManagement" number="1" service="AppsLauncher"/>
            </com:relatedObject>
            <com:sourceObject comment="">
              <com:objectType area="COM" number="6" service="ActivityTracking"/>
            </com:sourceObject>
          </com:event>
        </com:events>
      </com:features>
    </mal:service>
  </mal:area>
</mal:specification>
